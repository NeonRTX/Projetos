using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Sistema_De_Combate
{
    class Program
    {
        static void Main(string[] args)
        {
            //Instâncias dos Personagens
            Guerreiro guerreiro1 = new Guerreiro();
            
            /*Arqueiro arqueiro1 = new Arqueiro();
            Mago mago1 = new Mago();
            Clerigo clerigo1 = new Clerigo();*/

            //Instâncias dos Inimigos
            Goblin goblin1 = new Goblin();

            Inicio();

            int turnos = 0;
            while (true)
            {
                
                if (turnos != 0)
                {
                   goblin1.AtacarGuerreiro(guerreiro1);
                }
                turnos++;
                guerreiro1.VerificarArmadura();
                guerreiro1.VerificarEspecial();
                Console.WriteLine($"{turnos}° TURNO\n");

                Console.WriteLine("\n--GOBLIN--");
                Console.WriteLine($"Vida Atual: {goblin1.Vida}");
                Console.WriteLine($"Armadura Atual: {goblin1.Armadura}\n");

                Console.WriteLine("--GUERREIRO--");
                Console.WriteLine($"Vida Atual: {guerreiro1.Vida}");
                Console.WriteLine($"Armadura Atual: {guerreiro1.Armadura}");
                Console.WriteLine($"Estamina Atual: {guerreiro1.Estamina}\n");
                Console.WriteLine("Escolha a ação que deseja tomar...");
                Console.WriteLine("1 - Atacar");
                Console.WriteLine("2 - Defender");
                Console.WriteLine("3 - Usar Especial");

                string opcao = Console.ReadLine();
                Console.Clear();
                
                switch (opcao)
                {
                    case "1":
                        guerreiro1.AtacarGoblin(goblin1);
                        break;                        
                    case "2":
                        guerreiro1.Defender();
                        break;
                    case "3":
                        guerreiro1.UsarEspecial();
                        break;
                    
                }
                
            }                                   
        }
    public static void Inicio()
    {
      Console.WriteLine("\nVocê foi mandado numa missão para acabar com o covil dos goblins...");
      /*Console.WriteLine("\nSua PARTY foi mandada numa missão para acabar com o covil dos goblins...");
      Console.WriteLine("Um Guerreiro...");
      Console.WriteLine("Um Mago...");
      Console.WriteLine("Um Arqueiro...");
      Console.WriteLine("Um Clérigo...\n");*/
      Console.WriteLine("Aperte qualquer tecla para continuar...");
      Console.ReadKey();
      Console.Clear();
      Console.WriteLine("\nAdentrando as cavernas você se depara com seu primeiro inimigo...");
      Console.WriteLine("Um pequeno goblin está a sua frente...");
      Console.WriteLine("E agora você precisa tomar uma decisão...\n");
      Console.WriteLine("Aperte qualquer tecla para continuar...");
      Console.ReadKey();
      Console.Clear();
    }       
  }    

    abstract class Personagem
    {
        public int Vida;
        public int Estamina;
        public int Ataque;
        public int Armadura;
        public int Iniciativa;

        //Método para ROLAGEM DE DADOS
        public static Random dadoPersonagem = new Random();

        public virtual void UsarEspecial() 
        {
      
        } 


        /*public virtual void AtacarGoblin(Goblin goblin)
        {
            int acertoPersonagem;
            int dano;
            int dadoAcerto;            

            dadoAcerto = dadoPersonagem.Next(1, 21);
            acertoPersonagem = Ataque + dadoAcerto;
            if (dadoAcerto >= 19)
      {
        Console.WriteLine("=== JOGADA GUERREIRO ===");
        Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
        Console.WriteLine($"Total: {acertoPersonagem}");
        Console.WriteLine("Voce CRITOU o ataque");
        dano = dadoPersonagem.Next(1, 9) * 2;
        Console.WriteLine($"Dano total: {dano}");
        Console.WriteLine("========================\n");

        goblin.Vida -= dano;
      } else if (acertoPersonagem > goblin.Armadura)
            {
                Console.WriteLine("=== JOGADA GUERREIRO ===");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total para acertar: {acertoPersonagem}");
                Console.WriteLine("Voce acertou o ataque");
                dano = dadoPersonagem.Next(1,9);
                Console.WriteLine($"Dano total: {dano}");
                Console.WriteLine("========================\n");
                goblin.Vida -= dano;
            }  else if (acertoPersonagem < goblin.Armadura) {

                Console.WriteLine("=== JOGADA GUERREIRO ===");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");      
                Console.WriteLine($"Total para acertar: {acertoPersonagem}");      
                Console.WriteLine("Voce não acertou");
                Console.WriteLine("========================\n");

            }
        }*/
      
        public virtual void Defender()
    {
        Armadura += 5;
    }
    }    

    class Guerreiro : Personagem 
    {
    int turnosArmadura = 0;
    int turnosEspecial = 0;
    bool Especial = false;
    public Guerreiro()
        {           
            Vida = 12;
            Estamina = 3;
            Ataque = 4;
            Armadura = 18;  
           
        }

        public virtual void AtacarGoblin(Goblin goblin)
        {
            int acertoPersonagem;
            int dano;
            int danoE;
            int dadoAcerto;

            dadoAcerto = dadoPersonagem.Next(1, 21);
            acertoPersonagem = Ataque + dadoAcerto;
            if (dadoAcerto >= 19 && Especial == false)
            {
                Console.WriteLine("=== JOGADA GUERREIRO ===");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total: {acertoPersonagem}");
                Console.WriteLine("Voce CRITOU o ataque");
                dano = dadoPersonagem.Next(1, 9) * 2;
                Console.WriteLine($"Dano total: {dano}");
                Console.WriteLine("========================\n");
                goblin.Vida -= dano;
            }
            else if (acertoPersonagem > goblin.Armadura && Especial == false)
            {
                Console.WriteLine("=== JOGADA GUERREIRO ===");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total para acertar: {acertoPersonagem}");
                Console.WriteLine("Voce acertou o ataque");
                dano = dadoPersonagem.Next(1, 9);
                Console.WriteLine($"Dano total: {dano}");
                Console.WriteLine("========================\n");
                goblin.Vida -= dano;
            }
            else if (acertoPersonagem < goblin.Armadura && Especial == false)
            {

                Console.WriteLine("=== JOGADA GUERREIRO ===");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total para acertar: {acertoPersonagem}");
                Console.WriteLine("Voce não acertou");
                Console.WriteLine("========================\n");

            } 
            else if (dadoAcerto >= 19 && Especial == true)
            {
                Console.WriteLine("=== JOGADA GUERREIRO ===");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total: {acertoPersonagem}");
                Console.WriteLine("Voce CRITOU o ataque");
                dano = dadoPersonagem.Next(1, 9) * 2;
                danoE = dano/2;
                Console.WriteLine($"Dano total: {dano} + {danoE}");
                Console.WriteLine("========================\n");
                goblin.Vida -= dano + danoE;
            }
            else if (acertoPersonagem > goblin.Armadura && Especial == true)
            {
                Console.WriteLine("=== JOGADA GUERREIRO ===");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total para acertar: {acertoPersonagem}");
                Console.WriteLine("Voce acertou o ataque");
                dano = dadoPersonagem.Next(1, 9);
                danoE = dano/2;
                Console.WriteLine($"Dano total: {dano} + {danoE}");
                Console.WriteLine("========================\n");
                goblin.Vida -= dano + danoE;
            }
        }

        public void VerificarArmadura()
    {      
      if (Armadura != 18)
      {
        turnosArmadura++;

        if (turnosArmadura > 3)
        {
          Armadura = 18;
          turnosArmadura = 0;
        }
      }
    }    

        public override void UsarEspecial()
    {
      Especial = true;
            Estamina--;
            

    }
      
        public void VerificarEspecial()
    {
      if (Especial == true)
        turnosEspecial++;
        if (turnosEspecial > 3)
      {
        Especial = false;
        turnosEspecial = 0;
      }
   
    }
        
    }

    /*
    class Mago : Personagem
    {
        public Mago()
        {
            Vida = 8;
            Estamina = 3;
            Ataque = 4;
            Armadura = 14;
        }
    }

    class Arqueiro : Personagem
    {
        public Arqueiro()
        {
            Vida = 12;
            Estamina = 3;
            Ataque = 4;
            Armadura = 16;
        }
    }

    class Clerigo : Personagem
    {
        public Clerigo()
        {
            Vida = 10;
            Estamina = 3;
            Ataque = 4;
            Armadura = 12;
        }
    }
    */

    abstract class Inimigo
    {
    //Método para ROLAGEM DE DADOS  
        public static Random dadoInimigo = new Random();
        public int Vida;
        public int Estamina;
        public int Ataque;
        public int Armadura;
    }

    class Goblin : Inimigo
    {
        public Goblin()
        {
            Vida = 7;
            Estamina = 3;
            Ataque = 4;
            Armadura = 13;
        }

        public void AtacarGuerreiro(Guerreiro guerreiro)
        {
            int acertoInimigo;
            int dano;
            int dadoAcerto;

            Console.Clear();

            dadoAcerto = dadoInimigo.Next(1, 21);
            acertoInimigo = Ataque + dadoAcerto;
            if (dadoAcerto >= 19)
            {
                Console.WriteLine("==== JOGADA GOBLIN ====");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total: {acertoInimigo}");
                Console.WriteLine("O Goblin CRITOU o ataque");
                dano = dadoInimigo.Next(1, 9) * 2;
                Console.WriteLine($"Dano total: {dano}");
                Console.WriteLine("========================\n");
                guerreiro.Vida -= dano;
            }
            else if (acertoInimigo > guerreiro.Armadura)
            {
                Console.WriteLine("==== JOGADA GOBLIN ====");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total para acertar: {acertoInimigo}");
                Console.WriteLine("O Goblin acertou o ataque");
                dano = dadoInimigo.Next(1, 9);
                Console.WriteLine($"Dano total: {dano}");
                Console.WriteLine("========================\n");
                guerreiro.Vida -= dano;
            }
            else if (acertoInimigo < guerreiro.Armadura)
            {
                Console.WriteLine("==== JOGADA GOBLIN ====");
                Console.WriteLine($"Rolagem: {dadoAcerto} + {Ataque}");
                Console.WriteLine($"Total para acertar: {acertoInimigo}");
                Console.WriteLine("O Goblin não acertou");
                Console.WriteLine("========================\n");
            }
        }

    }

    class Harpia : Inimigo
    {

    }

  }
